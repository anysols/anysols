<link href="/views/styles/application.css" rel="stylesheet"/>
<script>
    function onloadIframe(obj, resize) {
        $('#main-iframe-loading').addClass('d-none');
        $('#main-iframe').removeClass('d-none');
        if(resize)
            obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
    }
    $(document).ready(function(){
        $('.shortcuts-tree').on('click', function(){
            $(this).parent().toggleClass('active');
            $(this).find('.svg-inline--fa').toggleClass('fa-chevron-down fa-chevron-up');
        });
        $('.link a').on('click', function(){
            $('.link').removeClass('active');
            $(this).closest('.link').addClass('active');
            $('#main-iframe').attr('src', '/module/'+$(this).attr('data-id'))
        });
        $('.context-header').on('click', function(){
            $('#main-iframe').attr('src', '/app/<%= application.id%>/home');
        });
    });
</script>

<nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark justify-content-between py-1">
    <a class="navbar-brand py-0 mr-auto mt-2 mt-lg-0" href="/">
        <img src="http://anysols.com/assets/img/anysols.png" class="d-inline-block align-top" alt="Anysols" width="30" height="25">
        Anysols
    </a>
    <form class="form-inline">
        <div class="input-group mr-sm-2">
            <input type="text" class="form-control form-control-sm" placeholder="Search" aria-label="Search">
            <div class="input-group-append">
                <button class="btn btn-primary btn-sm" type="submit"><i class="fas fa-search"></i></button>
            </div>
        </div>
    </form>
    <ul class="navbar-nav">
        <li class="nav-item dropdown">
            <a class="btn btn-secondary btn-sm" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="fas fa-cog"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="/signin">Sign Out</a>
            </div>
        </li>
    </ul>
</nav>

<main role="main">
    <div class="nav-sidebar bg-light">
        <div class="nav-sidebar-inner-scroll">
            <div class="context-header">
                <a href="#">
                    <div class="avatar-container">
                        <div class="avatar  avatar-tile"><%= application.name[0]%></div>
                    </div>
                    <div class="sidebar-context-title">
                        <%= application.name%>
                    </div>
                </a>
            </div>
            <ul class="sidebar-top-level-items">
                <%- partial('partials/nav-tree', {modules: modules}) %>
            </ul>

        </div>
    </div>
    <div class="container-fluid pt-3" id="main-iframe-loading">
        loading
    </div>
    <iframe id="main-iframe" class="d-none" src="/app/<%= application.id%>/home" frameBorder="0" scrolling="yes"
            onload="onloadIframe(this)"></iframe>
</main>

