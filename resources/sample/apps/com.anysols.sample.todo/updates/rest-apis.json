{
    "collection": "p_rest_api",
    "records": [
        {
            "id": "5b2e3e808ba38928749da7eb",
            "script": "(function(req, res) {\n\t let Todo = as.model('todo');\n\t Todo.find({created_by: req.user.id}).exec().then((todos)=>{\n\t\tres.send(todos);\n\t });\n})(req, res);",
            "method": "GET",
            "url": "/api/todo/list",
            "name": "todo"
        },
        {
            "id": "5b2f0b5be3f67132ccc7b291",
            "script": "(function (req, res) {\n\tif (req.body && req.body.action) {\n\t\tlet Todo = as.model('todo');\n\t\tif (req.body.action === 'create') {\n\t\t\tlet todo = new Todo(req.body.record);\n\t\t\ttodo.set('status', 'new');\n\t\t\ttodo.save().then(function (response) {\n\t\t\t\tres.send(response);\n\t\t\t});\n\t\t} else if (req.body.action === 'remove') {\n\t\t\treq.body.items.forEach(function (id) {\n\t\t\t\tTodo.findById(id).exec().then(function (todo) {\n\t\t\t\t\ttodo.remove();\n\t\t\t\t});\n\t\t\t});\n\t\t\tres.send(\"success\");\n\t\t} else if (req.body.action === 'done') {\n\t\t\tTodo.findById(req.body.item).exec().then(function (todo) {\n\t\t\t\ttodo.set('status', 'done');\n\t\t\t\ttodo.save().then(function () {\n\t\t\t\t\tres.send(\"success\");\n\t\t\t\t});\n\t\t\t});\n\t\t} else if (req.body.action === 'undone') {\n\t\t\tTodo.findById(req.body.item).exec().then(function (todo) {\n\t\t\t\ttodo.set('status', 'undone');\n\t\t\t\ttodo.save().then(function () {\n\t\t\t\t\tres.send(\"success\");\n\t\t\t\t});\n\t\t\t});\n\t\t} else\n\t\t\tres.status(500).send(\"action is required parameter\");\n\t} else\n\t\tres.status(500).send(\"action is required parameter\");\n})(req, res);",
            "method": "POST",
            "url": "/api/todo/actions",
            "name": "todo"
        }
    ]
}
